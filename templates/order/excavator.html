{% extends "base.html" %}

{% block content %}
<div class="page">
    <form method="post" action="/summary">
        {% csrf_token %}
        {% include 'components/header.html'%}
        {% include 'components/cart.html'%} 
        <div class="content">
            {% include 'components/username.html' %}
            <h4 class="ms-4">Excavator</h4>
            <div class="breadcrumb d-flex gap-2 ms-4">
                <a href="/"><i data-feather="home"></i></a> 
                <p>/</p>
                <b>Excavator</b>
            </div>
            {% include 'components/field.html' %}
            <div class="d-flex justify-content-end mb-4 me-4">
                <button type="submit" class="linkButton outButton">Place order</button>
            </div>
        </div> 
    </form>
</div>
{% endblock content %}

{% block script %}
<script defer>
    // cart
    const content = $(".content")
    const cart = $(".cart");
    const btnOrder = $(".btnOrder")
    const outButton = $(".outButton")
    let cartOut = false;

    function getContentWidth() {
        contentWidth = content.css("width");
        return parseFloat(contentWidth) / 2 + "px"
    };
    
    btnOrder.on("click", toggleCart);
    $(".closeButton").on("click", toggleCart)

    function toggleCart() {
        const contentWidth = getContentWidth();
        if (!cartOut) {
            cart.css("right", 0)
            let padding = contentWidth
            content.css("padding-right", padding)
            btnOrder.html("Hide order")
            outButton.css("display", "none")
        }else {
            cart.css("right", "-" + contentWidth)
            content.css("padding-right", "0px")
            btnOrder.html("Show order")
            outButton.css("display", "block")
        }
        cartOut = !cartOut 
    }

    $(window).on("resize", function () {
        if (cartOut) {
            content.css("padding-right", getContentWidth());
        } else {
            cart.css("right", "-" + getContentWidth())
        }
    });
</script>

<script defer>
    // fields
</script>
{% endblock script %}